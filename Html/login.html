<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://kit.fontawesome.com/aed33b3770.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../css/login.css">
</head>
<body>
    <div>
        <div id="toastbox">
          
        </div>
        <div class="logo">
            <a href="">Read<span>wave</span></a>
        </div>
            <div class="wrapper">
                <form action=""> 
                    <a href="../index.html"> <ion-icon name="backspace" class="bbtn"></ion-icon></a>
                    <div class="hb">
                    <h1>Login</h1>
                    </div>
                    <div class="input-box">
                        <input type="text" id="fname" name="fname" placeholder="username"><br>
                    </div>
                    <div class="input-box">
                        <input type="password" id="pwd" name="pwd" placeholder="password">
                    </div>
                    <button type="button" class="btn" onclick="saveData();"> Login</button>
                    <div class="register-link">
                        <p>Dont have an accoount? <a href="./signup.html">Register</a></p>
                    </div>
                </form>
            </div>
</div>
</body>

<script>
  function displayToast(message, style, icon) {
    const toastbox = document.getElementById("toastbox");
    const toast = document.createElement("div");
    toast.className = style;
    toast.innerHTML = `<i class="${icon}"></i>${message}`;
    toastbox.appendChild(toast);

    setTimeout(() => {
        toast.remove();
    }, 3000);
}

function saveData() {
    let name, password;
    name = document.getElementById("fname").value;
    password = document.getElementById("pwd").value;
    let dataBase = JSON.parse(localStorage.getItem("user"));

    if (!name || !password) {
        displayToast("Please fill in your details", "toast1", "fa-circle-check succ");
    } else if (dataBase) {
        let userFound = false; // Initialize a flag to track if the user is found.

        for (let i = 0; i < dataBase.length; i++) {
            if (name === dataBase[i].fname && password === dataBase[i].pwd) {
                displayToast("Login successful", "toast1", "fa-circle-check succ");
                setTimeout(() => {
                window.location.href = "Library.html";
            }, 2000);
                userFound = true; // Set the flag to true.
                break; // Exit the loop since the user is found.
            }
        }

        if (!userFound) {
            displayToast("Name not found or incorrect password", "toast2", "fa-circle-xmark fai");
        }
    } else {
        displayToast("User database not found", "toast3", "fa-circle-exclamation war");
    }
}
   


</script>

<script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>


</html>